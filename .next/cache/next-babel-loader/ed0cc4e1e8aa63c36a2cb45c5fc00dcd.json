{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/taeeun/Desktop/Programming/Projects/MrDaeBak/MrDaeBak_front/components/OrderForm/OrderInfoForm.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\nimport { FormContainer, ContentCard, InfoContainer, NameCard, Input, MealNum, SubmitBtn } from './style';\nimport useInput from '../../hooks/useInput';\nimport { goToResult } from '../../reducers/order';\n\nvar OrderInfoForm = function OrderInfoForm() {\n  _s();\n\n  var _useInput = useInput(''),\n      _useInput2 = _slicedToArray(_useInput, 2),\n      paymentInfo = _useInput2[0],\n      onChangePaymentInfo = _useInput2[1];\n\n  var _useState = useState(''),\n      address = _useState[0],\n      setAddress = _useState[1];\n\n  var _useState2 = useState('0'),\n      mealNum = _useState2[0],\n      setMealNum = _useState2[1];\n\n  var _useState3 = useState(0),\n      pay = _useState3[0],\n      setPay = _useState3[1];\n\n  var selectRef = useRef(null);\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.order;\n  }),\n      dinnerId = _useSelector.dinnerId,\n      dinnerName = _useSelector.dinnerName,\n      dinnerStyle = _useSelector.dinnerStyle,\n      option = _useSelector.option,\n      special = _useSelector.special,\n      price = _useSelector.price,\n      stylePrice = _useSelector.stylePrice,\n      optionPrice = _useSelector.optionPrice,\n      time = _useSelector.time;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.user;\n  }),\n      userInfo = _useSelector2.userInfo,\n      isLoggedIn = _useSelector2.isLoggedIn;\n\n  var onChangeAddress = useCallback(function (e) {\n    setAddress(e.target.value);\n  }, []);\n  var onChangeMealNum = useCallback(function (e) {\n    setMealNum(e.target.value);\n  }, []);\n  var submitOrder = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var orderInfo;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!(address === '')) {\n              _context.next = 5;\n              break;\n            }\n\n            alert('주소를 입력해주세요.');\n            return _context.abrupt(\"return\");\n\n          case 5:\n            if (!(paymentInfo === '')) {\n              _context.next = 10;\n              break;\n            }\n\n            alert('카드 정보를 입력해주세요.');\n            return _context.abrupt(\"return\");\n\n          case 10:\n            if (!(parseInt(mealNum) === 0)) {\n              _context.next = 13;\n              break;\n            }\n\n            alert('식사 인원을 선택해주세요.');\n            return _context.abrupt(\"return\");\n\n          case 13:\n            orderInfo = {\n              userId: userInfo.userId,\n              mealNum: parseInt(mealNum),\n              resTime: time,\n              address: address,\n              paymentInfo: paymentInfo,\n              dinnerInfo: {\n                dinnerId: dinnerId,\n                dinnerName: dinnerName,\n                dinnerStyle: dinnerStyle,\n                options: _toConsumableArray(option)\n              }\n            };\n            _context.next = 16;\n            return axios.post('/order', orderInfo).then(function (res) {\n              if (res.data.success === 'success') {\n                dispatch(goToResult(mealNum, address));\n              } else {\n                alert('주문에 실패했습니다.');\n              }\n            })[\"catch\"](function (err) {\n              return console.error(err);\n            });\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [address, paymentInfo, mealNum]);\n  var getRecentAddress = useCallback(function () {\n    console.log(userInfo.address);\n\n    if (userInfo.address === '') {\n      alert('최근 주소가 존재하지 않습니다.');\n      return;\n    } else {\n      setAddress(userInfo.address);\n    }\n  }, []);\n  useEffect(function () {\n    if (special === 'true') {\n      setMealNum('2');\n      selectRef.current.setAttribute('disabled', 'disabled');\n    }\n  }, []);\n  useEffect(function () {\n    if (special === 'true') {\n      setPay(price + stylePrice + optionPrice);\n    } else {\n      setPay((price + stylePrice + optionPrice) * parseInt(mealNum));\n    }\n  }, [mealNum]);\n  return /*#__PURE__*/_jsxDEV(FormContainer, {\n    children: [/*#__PURE__*/_jsxDEV(ContentCard, {\n      style: {\n        flexDirection: 'column',\n        padding: '50px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(InfoContainer, {\n        style: {\n          margin: '15px 0',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(NameCard, {\n          style: {\n            fontSize: '1.3rem'\n          },\n          children: \"\\uC8FC\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          value: address,\n          onChange: onChangeAddress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"btn-hover\",\n          onClick: getRecentAddress,\n          style: {\n            fontSize: '0.8rem',\n            position: 'absolute',\n            top: '-20px',\n            right: '15px'\n          },\n          children: \"\\uCD5C\\uADFC \\uC8FC\\uC18C \\uAC00\\uC838\\uC624\\uAE30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(InfoContainer, {\n        style: {\n          margin: '15px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(NameCard, {\n          style: {\n            fontSize: '1.3rem'\n          },\n          children: \"\\uCE74\\uB4DC\\uBC88\\uD638\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"text\",\n          value: paymentInfo,\n          onChange: onChangePaymentInfo\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(InfoContainer, {\n        style: {\n          margin: '15px 0'\n        },\n        children: [/*#__PURE__*/_jsxDEV(NameCard, {\n          style: {\n            fontSize: '1.3rem'\n          },\n          children: \"\\uC2DD\\uC0AC \\uC778\\uC6D0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_jsxDEV(MealNum, {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            ref: selectRef,\n            value: mealNum,\n            onChange: onChangeMealNum,\n            style: {\n              width: '60px',\n              height: '25px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"0\",\n              children: \"\\uC120\\uD0DD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"1\",\n              children: \"1\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"2\",\n              children: \"2\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"3\",\n              children: \"3\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"4\",\n              children: \"4\\uC778\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 29\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }, _this), special === 'true' && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"* \\uD574\\uB2F9 \\uBA54\\uB274\\uB294 2\\uC778 \\uC8FC\\uBB38\\uB9CC \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(InfoContainer, {\n        style: {\n          margin: '15px 0',\n          borderTop: '1px solid #acaaa9',\n          justifyContent: 'flex-end',\n          padding: '30px 20px 0'\n        },\n        children: /*#__PURE__*/_jsxDEV(NameCard, {\n          children: [\"\\uACB0\\uC81C \\uC608\\uC815 \\uAE08\\uC561 : \", pay, \"\\uC6D0\", userInfo.classification === 'vip' && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, _this), \"VIP \\uD560\\uC778 \\uAE08\\uC561 : \", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: pay * (85 / 100)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 41\n            }, _this), \"\\uC6D0\"]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(SubmitBtn, {\n      className: \"btn-hover\",\n      onClick: submitOrder,\n      children: \"\\uC8FC\\uBB38\\uD558\\uAE30\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(OrderInfoForm, \"FpY4jWYsA+oHn88Xe0iZPP4dZbo=\", false, function () {\n  return [useInput, useDispatch, useSelector, useSelector];\n});\n\n_c = OrderInfoForm;\nexport default OrderInfoForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderInfoForm\");","map":{"version":3,"sources":["/Users/taeeun/Desktop/Programming/Projects/MrDaeBak/MrDaeBak_front/components/OrderForm/OrderInfoForm.js"],"names":["React","useState","useCallback","useEffect","useRef","useDispatch","useSelector","axios","FormContainer","ContentCard","InfoContainer","NameCard","Input","MealNum","SubmitBtn","useInput","goToResult","OrderInfoForm","paymentInfo","onChangePaymentInfo","address","setAddress","mealNum","setMealNum","pay","setPay","selectRef","dispatch","state","order","dinnerId","dinnerName","dinnerStyle","option","special","price","stylePrice","optionPrice","time","user","userInfo","isLoggedIn","onChangeAddress","e","target","value","onChangeMealNum","submitOrder","alert","parseInt","orderInfo","userId","resTime","dinnerInfo","options","post","then","res","data","success","err","console","error","getRecentAddress","log","current","setAttribute","flexDirection","padding","margin","position","fontSize","top","right","width","height","borderTop","justifyContent","classification","color"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport axios from 'axios';\n\nimport { FormContainer, ContentCard, InfoContainer, NameCard, Input, MealNum, SubmitBtn } from './style';\nimport useInput from '../../hooks/useInput';\nimport { goToResult } from '../../reducers/order';\n\nconst OrderInfoForm = () => {\n    const [paymentInfo, onChangePaymentInfo] = useInput('');\n    const [address, setAddress] = useState('');\n    const [mealNum, setMealNum] = useState('0');\n    const [pay, setPay] = useState(0);\n    const selectRef = useRef(null);\n    const dispatch = useDispatch();\n    const { dinnerId, dinnerName, dinnerStyle, option,\n            special, price, stylePrice, optionPrice, time } = useSelector(state => state.order);\n    const { userInfo, isLoggedIn } = useSelector(state => state.user);\n\n    const onChangeAddress = useCallback((e) => {\n        setAddress(e.target.value);\n    }, []);\n\n    const onChangeMealNum = useCallback((e) => {\n        setMealNum(e.target.value);\n    }, []);\n\n    const submitOrder = useCallback(async () => {\n        if(address === '') {\n            alert('주소를 입력해주세요.');\n            return;\n        } else if(paymentInfo === '') {\n            alert('카드 정보를 입력해주세요.');\n            return;\n        } else if(parseInt(mealNum) === 0) {\n            alert('식사 인원을 선택해주세요.');\n            return;\n        }\n\n        const orderInfo = {\n            userId: userInfo.userId,\n            mealNum: parseInt(mealNum),\n            resTime: time,\n            address,\n            paymentInfo,\n            dinnerInfo: {\n                dinnerId,\n                dinnerName,\n                dinnerStyle,\n                options: [...option],\n            }\n        }\n\n        await axios.post('/order', orderInfo)\n            .then(res => {\n                if(res.data.success === 'success') {\n                    dispatch(goToResult(mealNum, address));\n                } else {\n                    alert('주문에 실패했습니다.')\n                }\n            })\n            .catch(err => console.error(err));\n    }, [address, paymentInfo, mealNum]);\n\n    const getRecentAddress = useCallback(() => {\n        console.log(userInfo.address);\n        if(userInfo.address === '') {\n            alert('최근 주소가 존재하지 않습니다.');\n            return;\n        } else {\n            setAddress(userInfo.address);\n        }\n    }, []);\n\n    useEffect(() =>{\n        if(special === 'true') {\n            setMealNum('2');\n            selectRef.current.setAttribute('disabled', 'disabled');\n        }   \n    }, []);\n\n    useEffect(() => {\n        if(special === 'true') {\n            setPay(price+stylePrice+optionPrice);\n        } else {\n            setPay((price+stylePrice+optionPrice)*parseInt(mealNum));\n        }\n    }, [mealNum])\n\n    return (\n        <FormContainer>\n            <ContentCard style={{flexDirection:'column', padding:'50px 0'}}>\n                <InfoContainer style={{margin:'15px 0', position:'relative'}}>\n                    <NameCard style={{fontSize: '1.3rem'}}>주소</NameCard>\n                    <Input type=\"text\" value={address} onChange={onChangeAddress} />\n                    <div \n                        className=\"btn-hover\" \n                        onClick={getRecentAddress}\n                        style={{\n                            fontSize:'0.8rem',\n                            position:'absolute',\n                            top: '-20px',\n                            right: '15px',\n                    }}>\n                        최근 주소 가져오기\n                    </div>\n                </InfoContainer>\n                <InfoContainer style={{margin:'15px 0'}}>\n                    <NameCard style={{fontSize: '1.3rem'}}>카드번호</NameCard>\n                    <Input type=\"text\" value={paymentInfo} onChange={onChangePaymentInfo} />\n                </InfoContainer>\n                <InfoContainer style={{margin:'15px 0'}}>\n                    <NameCard style={{fontSize: '1.3rem'}}>식사 인원</NameCard>\n                    <MealNum>\n                        <select \n                            ref={selectRef}\n                            value={mealNum} \n                            onChange={onChangeMealNum} \n                            style={{\n                                width: '60px',\n                                height: '25px'\n                            }}>\n                            <option value=\"0\">선택</option>\n                            <option value=\"1\">1인</option>\n                            <option value=\"2\">2인</option>\n                            <option value=\"3\">3인</option>\n                            <option value=\"4\">4인</option>\n                        </select>\n                    </MealNum>\n                </InfoContainer>\n                {(special === 'true') &&\n                <div>* 해당 메뉴는 2인 주문만 가능합니다</div>}\n                <InfoContainer style={{\n                    margin:'15px 0', \n                    borderTop:'1px solid #acaaa9',\n                    justifyContent: 'flex-end',\n                    padding: '30px 20px 0',\n                    }}>\n                        <NameCard>\n                            결제 예정 금액 : {pay}원\n                            {userInfo.classification === 'vip' &&\n                            <>\n                            <br />\n                            <br />\n                            VIP 할인 금액 : <span style={{color: 'red'}}>{pay*(85/100)}</span>원\n                            </>}\n                        </NameCard>\n                </InfoContainer>\n            </ContentCard>\n            <SubmitBtn className=\"btn-hover\" onClick={submitOrder}>주문하기</SubmitBtn>\n        </FormContainer>\n    );\n};\n\nexport default OrderInfoForm;"]},"metadata":{},"sourceType":"module"}